# CLI Integration – Progress Log (Paused 2025-07-22)

## Context
We were working through **Phase 1 – Stub A** of the `cli_integration_plan` to build the REGRU CLI on Windows and stage the binary in `bin/`.

### Completed
1. `cli_integration_plan/` directory with Phase 1–3 markdown plans.
2. CLI crate (`cli/`) added to workspace with `Cargo.toml`, `src/main.rs`, and sample `input/products.json`.
3. Build scripts:
   * `scripts/build-cli.ps1` (PowerShell)
   * `scripts/build-cli.sh` (bash)
4. `.gitignore` updated to exclude `bin/`.
5. Documentation `docs/CLI.md` drafted (build, usage, security, Windows troubleshooting).

### Current Task (1-A-2)
Build `regru` in **release** mode on local Windows.

* Initial MSVC ICE in `ring` fixed by updating Build Tools.
* Subsequent crashes (`self_encryption`, `h2`, `blst`, `libp2p-identify`) persist; indications of antivirus / MSVC environment instability.
* Single-thread build and AV exclusion recommended but not yet executed.

## Next Steps when Resuming
1. Open *Developer PowerShell for VS 2022*.
2. (Optional) Add `C:\CursorProjects\REG_AUTONOMI\target` to AV exclusions.
3. Run single-thread build:
   ```powershell
   cd C:\CursorProjects\REG_AUTONOMI
   cargo build -p regru --release -j 1
   ```
4. On success, copy binary:
   ```powershell
   mkdir -Force bin
   Copy-Item target\release\regru.exe bin\
   ```
5. Mark TODO 1-A-2 as completed; continue with 1-A-3 (copy artefacts and verify .gitignore).

## Alternate Path
If local build remains unstable:
* Use WSL 2 or Linux host to build once and copy binary to Windows.
* Or create a temporary GitHub Actions workflow on a non-deployment branch to produce artefact.

## Safety
No current changes affect production site or deployment branches. CLI code is isolated, binaries live in `bin/`, web server unaffected.

---
**Paused by request – 2025-07-22** 